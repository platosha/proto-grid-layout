<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>proto-grid-layout test</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../proto-grid-layout.html">
  </head>
  <body>

    <test-fixture id="basic">
      <template>
        <proto-grid-layout></proto-grid-layout>
      </template>
    </test-fixture>

    <script>
      describe('proto-grid-layout', () => {

        let gridLayout;

        beforeEach(() => gridLayout = fixture('basic'));

        // The rendering is async now, so wait one frame
        beforeEach(done => requestAnimationFrame(() => done()));

        it('should be registered', () => {
          const klass = customElements.get('proto-grid-layout');
          expect(klass).to.not.be.instanceof(HTMLUnknownElement);
          expect(gridLayout.constructor).to.equal(klass);
        });

        it('should have display: block; style', () => {
          expect(getComputedStyle(gridLayout).display).to.equal('block');
        });

        it('should include Polymer.IronResizableBehavior', () => {
          expect(gridLayout.notifyResize).to.be.instanceof(Function);
          const spy = sinon.spy();
          gridLayout.addEventListener('iron-resize', spy);
          gridLayout.notifyResize();
          expect(spy).to.be.called;
        });

        describe('layout container', () => {

          it('should exist', () => {
            expect(gridLayout.$.layout).to.be.instanceof(HTMLElement);
          });

          it('should have display: grid; style', () => {
            expect(getComputedStyle(gridLayout.$.layout).display)
              .to.be.oneOf(['grid', '-ms-grid']);
          });

          it('should contain a default slot', () => {
            const slot = gridLayout.$.slot;
            expect(slot.getAttribute('name')).to.be.null;
            expect(slot.parentNode).to.equal(gridLayout.$.layout);
          });

        });

      });
    </script>

  </body>
</html>
